# Docker Desktop 

---
## 2024/11/30

<thinking>
让我整理一下使用Docker Desktop需要注意的关键点：

1. 资源管理方面
   - CPU、内存和磁盘的分配
   - WSL2的资源使用情况

2. 操作习惯方面
   - 容器的启动和停止
   - 镜像的管理
   - 网络和卷的管理

3. 性能和稳定性方面
   - 定期清理
   - 日志查看
   - 系统监控
</thinking>

# Docker Desktop 使用指南

## 1. 资源管理

### 1.1 系统资源分配
- 在Settings > Resources中设置合理的资源限制
- 根据主机配置分配适当的CPU和内存
- 注意磁盘空间的使用情况

### 1.2 WSL2资源
- 关注WSL2的内存使用
- 适时清理WSL2占用的磁盘空间

## 2. 日常操作习惯

### 2.1 容器管理
- 未使用的容器及时停止和删除
- 使用有意义的容器名称（如mysql-cake, tomcat-cake）
- 养成使用 `docker stop` 后再 `docker rm` 的习惯

### 2.2 镜像管理
- 定期清理未使用的镜像
- 使用 `docker images prune` 清理悬空镜像
- 保留必要的镜像版本

### 2.3 网络管理
- 创建自定义网络而不是使用默认网络
- 给网络取有意义的名称（如cake-network）
- 及时清理不用的网络

### 2.4 数据卷管理
- 正确设置卷的挂载路径
- 使用绝对路径避免问题
- 注意Windows路径的写法（使用正斜杠/）

## 3. 故障排查

### 3.1 日志查看
- 使用Docker Desktop的日志查看功能
- 通过 `docker logs` 命令查看容器日志
- 设置合适的日志驱动

### 3.2 性能监控
- 关注容器的CPU和内存使用情况
- 监控容器的运行状态
- 注意网络连接情况

## 4. 最佳实践

### 4.1 启动顺序
- 先启动数据库等基础服务
- 再启动依赖这些服务的应用

### 4.2 清理操作
- 定期清理不用的容器和镜像
- 清理构建缓存
- 管理日志文件大小

### 4.3 配置备份
- 保存重要的配置文件
- 备份重要的数据卷
- 记录容器的启动参数

## 5. 常见问题解决
- 端口冲突：检查端口占用情况
- 资源不足：调整资源分配
- 网络问题：检查网络配置
- 权限问题：检查文件权限设置

定期执行这些维护工作可以保持Docker Desktop运行流畅，提高开发效率。

---
## 2024/11/26
- 虽然早几天前就下载了DockerDesktop 但是一直没机会使用，不过现在倒是有机会用了，  
拉取了几个镜像(images) - MySql, Nginx, Redis. 然后用这几个镜像创建了容器(containers)  
很好理解 镜像是容器的模板，容器是镜像的示例。  
配置Mysql 镜像的时候，遇到一个错误就是需要配置系统变量：默认密码。  
不然在创建镜像时会报错。  
然后嘛就是数据持久化需要挂载(Volumes)卷。  
然后配置Nginx也是遇到了需要默认配置文件，这倒是通过挂载主机目录并映射到docker内部目录实现的。  
Redis倒是没有去配置，短时间内应该用不上。  
```bash
PS C:\Users\user> docker run -d --name nginx `
>>   -v D:/coding/classdesign/nginx/config:/etc/nginx `
>>   -v D:/coding/classdesign/nginx/html:/var/www/html `
>>   -v D:/coding/classdesign/nginx/logs:/var/log/nginx `
>>   -p 80:80 nginx
```
以上是创建nginx的命令，把一些常见配置以及主要目录挂载到主机，然后配置了端口映射。  

